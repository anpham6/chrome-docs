<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image &mdash; E-mc 0.9.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=983eb2ed" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/role.css?v=7d609451" />
      <link rel="stylesheet" type="text/css" href="../_static/content.css?v=59d4ba9d" />
      <link rel="stylesheet" type="text/css" href="../_static/highlight-abap.css?v=0a013c1c" />
      <link rel="stylesheet" type="text/css" href="../_static/override.css?v=9e12782c" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=564a08b9"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cloud" href="../cloud/index.html" />
    <link rel="prev" title="Settings" href="../document/settings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: url(https://e-mc.readthedocs.io/en/latest/_static/places/001.png);" >

          
          
          <a href="../index.html" class="icon icon-home">
            E-mc
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../document/index.html">Document</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Image</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-configuration">Example configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-formats">Supported formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#webp">WebP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-syntax">Command syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-commands">Example commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#method-aliases">Method aliases </a></li>
<li class="toctree-l2"><a class="reference internal" href="#compression">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-chrome-commands">data-chrome-commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cloud/index.html">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db/index.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../task/index.html">Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build.html">Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legacy.html">squared-functions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: url(https://e-mc.readthedocs.io/en/latest/_static/places/001.png);" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">E-mc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Image</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="image">
<h1>Image<a class="headerlink" href="#image" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/jimp-dev/jimp#readme">https://github.com/jimp-dev/jimp#readme</a></p></li>
<li><p><strong>npm</strong> i <em>&#64;pi-r/jimp</em></p></li>
<li><p><strong>npm</strong> i <em>&#64;pi-r/tinify</em> <em class="alt">(Optional)</em></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Jimp</em> is used as the reference implementation for an <strong>Image</strong> module.</p>
</div>
<section id="example-configuration">
<h2>Example configuration<a class="headerlink" href="#example-configuration" title="Link to this heading"></a></h2>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">squared.json</span><a class="headerlink" href="#id21" title="Link to this code"></a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;handler&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;@pi-r/jimp&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;webp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;webp-custom&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// IImage handler for &quot;image/webp&quot; (npm i webp-custom)</span>
<span class="w">    </span><span class="nt">&quot;avif&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;avif-custom&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// IImage handler for &quot;image/avif&quot; (npm i avif-custom)</span>
<span class="w">    </span><span class="nt">&quot;settings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;jimp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;rotate_clockwise&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;webp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/path/to/libwebp&quot;</span><span class="w"> </span><span class="c1">// Optional</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><em>Jimp</em> rotation is counter-clockwise. Use <strong>{-45}</strong> to achieve a <em>45-degree</em> clockwise rotation.</p>
</div>
<p>Image conversion can be achieved using the <code class="docutils literal notranslate"><span class="pre">commands</span></code> array property in a <a class="reference internal" href="../references.html#references-squared-base-file"><span class="std std-ref">FileAsset</span></a> object.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;p &gt; img&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;saveTo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/static/generated&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Does not replace original image</span>
<span class="w">  </span><span class="nt">&quot;commands&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;png(800x600){45}&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// width: 800px; height: 600px; rotate: 45deg;</span>
<span class="w">    </span><span class="s2">&quot;jpeg(50,50)!sepia&quot;</span><span class="w"> </span><span class="c1">// left: 50px; top: 50px; method: sepia;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="supported-formats">
<h2>Supported formats<a class="headerlink" href="#supported-formats" title="Link to this heading"></a></h2>
<table class="image-format docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Format</p></th>
<th class="head"><p>R</p></th>
<th class="head"><p>W</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>png</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>jpeg</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>webp</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>bmp</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>gif</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>tiff</p></td>
<td><p>x</p></td>
<td></td>
</tr>
</tbody>
</table>
<section id="webp">
<h3>WebP<a class="headerlink" href="#webp" title="Link to this heading"></a></h3>
<table class="image-format docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Library</p></th>
<th class="head"><p>R</p></th>
<th class="head"><p>W</p></th>
<th class="head"><p>NPM</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dwebp</p></td>
<td><p>x</p></td>
<td></td>
<td><p>dwebp-bin <a class="footnote-reference brackets" href="#id12" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>cwebp</p></td>
<td></td>
<td><p>x</p></td>
<td><p>cwebp-bin <a class="footnote-reference brackets" href="#id12" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p>gif2webp</p></td>
<td></td>
<td><p>x</p></td>
<td><p>gif2webp-bin</p></td>
</tr>
<tr class="row-odd"><td><p>webpmux</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>node-webpmux</p></td>
</tr>
</tbody>
</table>
<p>There can be transparency issues for <em>WebP</em> animated transformations due to the <em>WebP</em> compression algorithm. <strong>node-webpmux</strong> is only used to extract the raw data from the <em>WebP</em> image and to reconstruct the frames.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>libwebp</strong> <a class="footnote-reference brackets" href="#id12" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> is supported locally for <em>WebP</em> transforms through <code class="docutils literal notranslate"><span class="pre">settings.webp.path</span></code>.</p>
</div>
</section>
</section>
<section id="command-syntax">
<h2>Command syntax<a class="headerlink" href="#command-syntax" title="Link to this heading"></a></h2>
<p>Placing an “<strong>&#64;</strong>” symbol after the <strong>format</strong> <em class="alt">(e.g. png&#64;)</em> will replace the original file inside the project. Using the “<strong>%</strong>” symbol will choose the smaller of the two files.</p>
<p>All segments are optional except <strong>format</strong>. Outer groupings and inner brackets are required.</p>
<ul class="simple">
<li><p><em class="target">format</em></p></li>
</ul>
<ul class="compressed simple">
<li><dl class="simple">
<dt>| <em>choose one</em> |</dt><dd><ul>
<li><p><strong>&#64;</strong></p></li>
<li><p><strong>%</strong></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>~size(<em class="lower">n</em>)(<em class="lower">w|x</em>) <em class="alt">(chrome only)</em></p></li>
<li><p>( minSize(<em class="lower">n,0</em>) , maxSize(<em class="lower">n,*</em>)? )</p></li>
<li><p>( width(<em class="lower">n|auto</em>) x height(<em class="lower">n|auto</em>) [<em class="lower">bilinear|bicubic|hermite|bezier</em>]? ^(<em class="lower">cover|contain|scale</em>)?[<em class="lower">left|center|right|top|middle|bottom</em>]? #background-color? )</p></li>
<li><p>( left(<em class="lower">+|-n</em>) , top(<em class="lower">+|-n</em>) | cropWidth(<em class="lower">n</em>) x cropHeight(<em class="lower">n</em>) )</p></li>
<li><p>{ …rotate(<em class="lower">n|-n</em>) #background-color? }</p></li>
<li><dl class="simple">
<dt>| <em>choose one</em> |</dt><dd><ul>
<li><p>opacity(<em class="lower">0.0-1.0</em>)</p></li>
<li><p>jpeg_quality(<em class="lower">0-100</em>)</p></li>
<li><p>webp_quality(<em class="lower">0-100?[photo|picture|drawing|icon|text]?[0-100]?</em>) <a class="footnote-reference brackets" href="#id13" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>!method <a class="footnote-reference brackets" href="#id14" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></li>
<li><p>!method(<em class="lower">1, “string_arg2”, [1, 2], true, { “a”: 1, “b”: “\}” }, …args?</em>) <a class="footnote-reference brackets" href="#id15" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p></li>
</ul>
</section>
<section id="example-commands">
<h2>Example commands<a class="headerlink" href="#example-commands" title="Link to this heading"></a></h2>
<p>Methods use simple bracket matching and does not fully check inside quoted strings. Unescaped “<strong>\\</strong>” with unpaired (”<strong>{}</strong>” or “<strong>[]</strong>”) will fail to parse.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>webp(50000)(800x600[bezier]^contain[right|bottom]#FFFFFF)(-50,50|200x200){45,-45,215,315#FFFFFF}|0.5||100[photo][75]|!sepia

webp!opacity(0.5)
webp!op(0.5)

webp~800w(800x600)
webp~2x(1024x768)
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The “<strong>~</strong>” is used to target the <code class="docutils literal notranslate"><span class="pre">&lt;img</span> <span class="pre">srcset&gt;</span></code> attribute.</p>
</div>
</section>
<section id="method-aliases">
<h2>Method aliases <a class="footnote-reference brackets" href="#id16" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a><a class="headerlink" href="#method-aliases" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.3%" />
<col style="width: 8.1%" />
<col style="width: 25.3%" />
<col style="width: 8.1%" />
<col style="width: 25.3%" />
<col style="width: 8.1%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>autocrop</p></td>
<td><p><strong>au</strong></p></td>
<td><p>background</p></td>
<td><p><strong>bg</strong></p></td>
<td><p>backgroundQuiet</p></td>
<td><p><strong>bq</strong></p></td>
</tr>
<tr class="row-even"><td><p>blit</p></td>
<td><p><strong>bt</strong></p></td>
<td><p>blur</p></td>
<td><p><strong>bl</strong></p></td>
<td><p>brightness</p></td>
<td><p><strong>br</strong></p></td>
</tr>
<tr class="row-odd"><td><p>circle</p></td>
<td><p><strong>ci</strong></p></td>
<td><p>color</p></td>
<td><p><strong>co</strong></p></td>
<td><p>colorType</p></td>
<td><p><strong>ce</strong></p></td>
</tr>
<tr class="row-even"><td><p>composite <a class="footnote-reference brackets" href="#id17" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p></td>
<td><p><strong>cp</strong></p></td>
<td><p>contain <a class="footnote-reference brackets" href="#id18" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p></td>
<td><p><strong>ct</strong></p></td>
<td><p>contrast</p></td>
<td><p><strong>cn</strong></p></td>
</tr>
<tr class="row-odd"><td><p>convolute</p></td>
<td><p><strong>cl</strong></p></td>
<td><p>cover</p></td>
<td><p><strong>cv</strong></p></td>
<td><p>crop</p></td>
<td><p><strong>cr</strong></p></td>
</tr>
<tr class="row-even"><td><p>cropQuiet</p></td>
<td><p><strong>cq</strong></p></td>
<td><p>deflateLevel</p></td>
<td><p><strong>dl</strong></p></td>
<td><p>deflateStrategy</p></td>
<td><p><strong>ds</strong></p></td>
</tr>
<tr class="row-odd"><td><p>displace</p></td>
<td><p><strong>dp</strong></p></td>
<td><p>dither565</p></td>
<td><p><strong>dt</strong></p></td>
<td><p>fade</p></td>
<td><p><strong>fa</strong></p></td>
</tr>
<tr class="row-even"><td><p>filterType</p></td>
<td><p><strong>ft</strong></p></td>
<td><p>fishEye</p></td>
<td><p><strong>fe</strong></p></td>
<td><p>flip</p></td>
<td><p><strong>fl</strong></p></td>
</tr>
<tr class="row-odd"><td><p>gaussian</p></td>
<td><p><strong>ga</strong></p></td>
<td><p>greyscale</p></td>
<td><p><strong>gr</strong></p></td>
<td><p>invert</p></td>
<td><p><strong>in</strong></p></td>
</tr>
<tr class="row-even"><td><p>mask</p></td>
<td><p><strong>ma</strong></p></td>
<td><p>mirror</p></td>
<td><p><strong>mi</strong></p></td>
<td><p>normalize</p></td>
<td><p><strong>no</strong></p></td>
</tr>
<tr class="row-odd"><td><p>opacity</p></td>
<td><p><strong>op</strong></p></td>
<td><p>opaque</p></td>
<td><p><strong>oq</strong></p></td>
<td><p>pixelate</p></td>
<td><p><strong>px</strong></p></td>
</tr>
<tr class="row-even"><td><p>posterize</p></td>
<td><p><strong>po</strong></p></td>
<td><p>resize</p></td>
<td><p><strong>re</strong></p></td>
<td><p>rgba</p></td>
<td><p><strong>rg</strong></p></td>
</tr>
<tr class="row-odd"><td><p>rotate</p></td>
<td><p><strong>ro</strong></p></td>
<td><p>scale</p></td>
<td><p><strong>sc</strong></p></td>
<td><p>scaleToFit</p></td>
<td><p><strong>sf</strong></p></td>
</tr>
<tr class="row-even"><td><p>sepia</p></td>
<td><p><strong>se</strong></p></td>
<td><p>shadow</p></td>
<td><p><strong>sh</strong></p></td>
<td><p>threshold</p></td>
<td><p><strong>th</strong></p></td>
</tr>
</tbody>
</table>
</section>
<section id="compression">
<h2>Compression<a class="headerlink" href="#compression" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://tinypng.com/developers">Tinify</a> web service is used for image compression <a class="footnote-reference brackets" href="#id19" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a>. The first 500 images are free each month with a developer API key.</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">squared.json</span><a class="headerlink" href="#id22" title="Link to this code"></a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;compress&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;tinify&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;api_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;**********&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Default API key (optional)</span>
<span class="w">      </span><span class="nt">&quot;proxy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;p &gt; img&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;compress&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;png&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// png | jpeg | webp</span>
<span class="w">      </span><span class="nt">&quot;plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tinify&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;apiKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;**********&quot;</span><span class="w"> </span><span class="c1">// Overrides settings</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Other formats can be compressed similarly using <a class="reference external" href="https://github.com/imagemin/imagemin#readme">imagemin</a>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;selector&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;p &gt; img&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;compress&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;imagemin-pngquant&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// npm i imagemin-pngquant</span>
<span class="w">      </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;quality&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When <em>format</em> is not defined the plugin will be applied to all images. <a class="footnote-reference brackets" href="#id20" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a> Multiple plugins of the same MIME will be processed in a series.</p>
</section>
<section id="data-chrome-commands">
<h2>data-chrome-commands<a class="headerlink" href="#data-chrome-commands" title="Link to this heading"></a></h2>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">img | video | audio | source | track | object | embed | iframe</span><a class="headerlink" href="#id23" title="Link to this code"></a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://s3-us-west-2.amazonaws.com/s.cdpn.io/12005/harbour1.jpg&quot;</span>
     <span class="na">data-chrome-file</span><span class="o">=</span><span class="s">&quot;saveAs:images/harbour.webp&quot;</span>
     <span class="na">data-chrome-options</span><span class="o">=</span><span class="s">&quot;inline&quot;</span><span class="p">&gt;</span> <span class="cm">&lt;!-- data:image/webp;base64 --&gt;</span>
</pre></div>
</div>
</div>
<p>You can use image commands with <strong>saveTo</strong> (directory) on any element where the image is the primary display output.</p>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">img | object | embed | iframe</span><a class="headerlink" href="#id24" title="Link to this code"></a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://s3-us-west-2.amazonaws.com/s.cdpn.io/12005/harbour1.jpg&quot;</span>
     <span class="na">data-chrome-file</span><span class="o">=</span><span class="s">&quot;saveTo:../images/harbour&quot;</span>
     <span class="na">data-chrome-commands</span><span class="o">=</span><span class="s">&quot;png(10000,75000)(800x600[bezier]^contain[right|bottom])::webp|0.5|&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Multiple transformations use “<strong>::</strong>” as the separator.</p>
</div>
<p>Transformations are given a <em>UUID</em> filename except when “<strong>&#64;</strong>” or “<strong>%</strong>” are used. Leaving <strong>data-chrome-file</strong> empty will save the transformations to the current image directory.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id12" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id3">3</a>)</span>
<p><a class="reference external" href="https://developers.google.com/speed/webp/download">https://developers.google.com/speed/webp/download</a></p>
</aside>
<aside class="footnote brackets" id="id13" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>cwebp options: -q -preset -near_lossless</p>
</aside>
<aside class="footnote brackets" id="id14" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">3</a><span class="fn-bracket">]</span></span>
<p>Method with no arguments. (e.g. sepia)</p>
</aside>
<aside class="footnote brackets" id="id15" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">4</a><span class="fn-bracket">]</span></span>
<p>No expressions or native objects.</p>
</aside>
<aside class="footnote brackets" id="id16" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">5</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://github.com/jimp-dev/jimp/tree/main/packages/jimp#methods">https://github.com/jimp-dev/jimp/tree/main/packages/jimp#methods</a></p>
</aside>
<aside class="footnote brackets" id="id17" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">6</a><span class="fn-bracket">]</span></span>
<p>srcOver | dstOver | multiply | add | screen | overlay | darken | lighten | hardLight | difference | exclusion</p>
</aside>
<aside class="footnote brackets" id="id18" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">7</a><span class="fn-bracket">]</span></span>
<p>left - 1 | center - 2 | right - 4 | top - 8 | middle - 16 | bottom - 32</p>
</aside>
<aside class="footnote brackets" id="id19" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">8</a><span class="fn-bracket">]</span></span>
<p>png | jpeg | webp</p>
</aside>
<aside class="footnote brackets" id="id20" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">9</a><span class="fn-bracket">]</span></span>
<p>e-mc 0.10</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../document/settings.html" class="btn btn-neutral float-left" title="Settings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../cloud/index.html" class="btn btn-neutral float-right" title="Cloud" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>