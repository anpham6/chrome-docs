=======
Modules
=======

.. toctree::
  :maxdepth: 1

  cloud
  compress
  core
  db
  document
  file-manager
  image
  module
  request
  task
  types
  watch

Private members
===============

:ref:`Symbols <references-mdn-symbol>` for semi-privacy were replaced with JavaScript private properties [#]_. The :target:`username` property requires pre-encryption [#]_ using the ``encryptUTF8`` method provided in the :doc:`Types <types>` package in **E-mc 0.12**.

.. highlight:: typescript

.. code-block::
  :caption: 0.11.0

  class Host {
      constructor(config: HostInitConfig) {
          if (config.username) {
              HOST_USERNAME.set(this, config.username);
          }
      }
  }

.. code-block::
  :caption: 0.12.0

  class Host {
      constructor(config: HostInitConfig) {
          if (config.username) {
              const cipher = HOST.CIPHER;
              this.#username = cipher ? decryptUTF8(cipher.algorithm, cipher.key, cipher.iv, config.username) || '' : config.username;
          }
      }
  }

ESM imports
===========

The ``default`` convention for all packages was removed in **E-mc 0.9**. It is auto-generated by the :abbr:`TSC (TypeScript)` compiler and is not necessary for out-of-source tree usage.

.. highlight:: javascript

.. code-block::
  :caption: 0.8.0

  import Module from "@e-mc/module"; // OK
  const Module = require("@e-mc/module"); // OK

  let Module;
  import("@e-mc/module").then(res => Module = res.default); // OK
  import("@e-mc/module").then(res => Module = res); // OK

  Module.default.isPath("/path/file"); // OK
  Module.isPath("/path/file"); // OK

.. code-block::
  :caption: 0.9.0
  :emphasize-lines: 5,8

  import Module from "@e-mc/module"; // OK
  const Module = require("@e-mc/module"); // OK

  let Module;
  import("@e-mc/module").then(res => Module = res.default); // FAIL
  import("@e-mc/module").then(res => Module = res); // OK

  Module.default.isPath("/path/file"); // FAIL
  Module.isPath("/path/file"); // OK

Besides static methods there is an additional utility library within these modules:

- `@e-mc/cloud/util <https://www.unpkg.com/@e-mc/cloud/util.d.ts>`_
- `@e-mc/db/util <https://www.unpkg.com/@e-mc/db/util.d.ts>`_
- `@e-mc/document/util <https://www.unpkg.com/@e-mc/document/util.d.ts>`_
- `@e-mc/request/util <https://www.unpkg.com/@e-mc/request/util.d.ts>`_

.. [#] https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_properties
.. [#] squared-express 3.5 + sqd-serve 0.17